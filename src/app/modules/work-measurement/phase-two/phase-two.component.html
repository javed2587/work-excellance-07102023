<div class="container-fluid">
  <div class="top-section">
    <div class="row row-custom">
      <div class="col-1 d-flex justify-content-end text-center">
        <button class="btn-style" (click)="toggle()">
          <img
            src="../../../../assets/images/WorkSystem/UpArrow.png"
            alt=""
            *ngIf="up"
          />
          <img
            src="../../../../assets/images/WorkSystem/DownArrow.png"
            alt=""
            *ngIf="down"
          />
        </button>
      </div>
      <div class="col-11 d-flex justify-content-end text-center"></div>
    </div>
  </div>

  <div class="card main-card card-top px-2 rounded shadow-sm" *ngIf="flagg">
    <div class="d-flex">
      <!-- <span  *ngIf="showLightModal" class="infoTollbar-group">
          <app-mian-tool-bar
          (pushColorToMainParentSpan)="fetchColor($event)"
          [displayVal]='modal' >
          </app-mian-tool-bar>
        </span> -->
      <div class="graphPhase">
        <div class="card graph-inner-card">
          <div class="row d-flex">
            <div class="col-10 pr-0 mt-1" (click)="openColorModal()">
              <div
                class="card graph-card"
                [ngStyle]="{ 'background-color': graphColor }"
              >
                <!-- <span *ngIf="colorModal">
                    <app-add-rating (onaddRating)="fetchColor($event)"   [displayVal]='modal'>
                    </app-add-rating>
                </span> -->
                <div class="card child-card m-3 p-1">
                  <!-- <span class="text-center" >{{measurementName}}</span> -->
                  <!-- <app-line-graph [graphValues]="chartData"></app-line-graph> -->

                  <app-line-graph
                    *ngIf="chartData != null"
                    [graphValues]="chartData"
                  ></app-line-graph>
                  <img
                    *ngIf="chartData == null"
                    height="90%"
                    width="100%"
                    id="{{ GraphListIndex }}"
                    src="../../../../assets/istockphoto-1157569047-170667a_cleanup.jpg"
                  />
                </div>
              </div>
            </div>
            <div class="col-2 pl-0 parent">
              <div class="info-icon">
                <span (click)="openLightCard()">
                  <img
                    class="light-icon"
                    src="../../../../assets/images/header-images/Bulb.svg"
                    alt=""
                  />
                </span>
              </div>
              <div class="absolute d-flex">
                <!-- <img class="task-color" src="../../../../assets/workImprovementService/task.svg" alt="" [ngStyle]="{'color': graphColor }" (click)="addGraphValueModal()">
                <img class="svg-color" src="../../../../assets/workImprovementService/upload.svg" alt="" [ngStyle]="{'color': graphColor }" >
                -->
                <img
                  class="task-color"
                  src="../../../../assets/workImprovement/task.svg"
                  alt=""
                  [ngStyle]="{ color: graphColor }"
                  (click)="addGraphValueModal()"
                />
                <input
                  #fileUpload
                  type="file"
                  (click)="(fileUpload.value)"
                  (change)="importFile($event)"
                  style="display: none"
                  accept="image/*"
                />
                <img
                  class="svg-color"
                  src="../../../../assets/workImprovement/upload.svg"
                  alt=""
                  [ngStyle]="{ color: graphColor }"
                  (click)="fileUpload.click()"
                />

                <!-- <img
                class="svg-color"
                src="../../../../assets/workImprovementService/upload.svg"
                alt=""
                [ngStyle]="{ color: graphColor }"
              /> -->
              </div>
              <!-- <div class="absolute d-flex" *ngIf="showCardYellow">
                  <img class="task-color" src="../../../../assets/workImprovementService/yellow-task.svg" alt="" [ngStyle]="{'color': graphColor }" (click)="addGraphValueModal()">
                  <img class="svg-color" src="../../../../assets/workImprovementService/yellow-upload.svg" alt="" [ngStyle]="{'color': graphColor }" >
              </div>

              <div class="absolute d-flex" *ngIf="showCardRed">
                  <img class="task-color" src="../../../../assets/workImprovementService/red-task.svg" alt="" [ngStyle]="{'color': graphColor }" (click)="addGraphValueModal()">
                  <img class="svg-color" src="../../../../assets/workImprovementService/red-upload.svg" alt="" [ngStyle]="{'color': graphColor }" >
              </div>

              <div class="absolute d-flex" *ngIf="showCardBlue">
                  <img class="task-color" src="../../../../assets/workImprovementService/blue-task.svg" alt="" [ngStyle]="{'color': graphColor }" (click)="addGraphValueModal()">
                  <img class="svg-color" src="../../../../assets/workImprovementService/blue-upload.svg" alt="" [ngStyle]="{'color': graphColor }" >
              </div> -->
            </div>
          </div>
        </div>
      </div>
      <div class="secondPhase">
        <div class="card inner-card hide-title">
          <div class="row">
            <div class="col-12 title-phase"></div>
          </div>
          <div class="">
            <div class="row input-group mx-0">
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Name</span>
              </div>
              <div class="col-9 text-end pb-0 my-0 px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  maxlength="100"
                  aria-describedby="basic-addon1"
                  (input)="getMeasurementName()"
                  [(ngModel)]="measurementName"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Owner</span>
              </div>
              <div class="col-9 text-end pb-0 my-0 px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  aria-describedby="basic-addon1"
                  (input)="getMeasurementOwner()"
                  [(ngModel)]="measurementOwner"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Scope</span>
              </div>
              <div class="col-9 text-end pb-0 my-0 px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  maxlength="150"
                  aria-describedby="basic-addon1"
                  (input)="getMeasurementScope()"
                  [(ngModel)]="measurementScope"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Data Source</span>
              </div>
              <div class="col-9 text-end pb-0 my-auto px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  maxlength="150"
                  (input)="getMeasurementDataSource()"
                  [(ngModel)]="measurementDataSource"
                  aria-describedby="basic-addon1"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Target</span>
              </div>
              <div class="col-9 text-end pb-0 my-0 px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  maxlength="100"
                  (input)="getMeasurementTarget()"
                  [(ngModel)]="measurementTarget"
                  aria-describedby="basic-addon1"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
              <div class="col-3 text-end pb-0 my-0 px-1 pt-1">
                <span>Actual</span>
              </div>
              <div class="col-9 text-end pb-0 my-0 px-1 pt-1">
                <input
                  type="text"
                  class="input-height"
                  placeholder=""
                  aria-label="Username"
                  maxlength="100"
                  (input)="getMeasurementActual()"
                  [(ngModel)]="measurementActual"
                  aria-describedby="basic-addon1"
                  [disabled]="true ? lockstatus == true : false"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="custom-card">
        <div class="card inner-card-fileds mx-2 mt-2">
          <div class="row">
            <div class="col-7 til head">
              <label class="label">Current State (The Story)</label>
            </div>
            <div class="col-5 buttons head">
              <div class="d-flex justify-content-end">
                <div
                  class=""
                  (click)="startService('current')"
                  *ngIf="showMicForCurrentState"
                >
                  <i
                    class="fa fa-microphone microphone-ico"
                    [ngStyle]="{
                      color: voiceCurrentState == true ? 'red' : 'blue'
                    }"
                  ></i>
                </div>
                <div class="">
                  <img
                    src="../../../../../assets/images/WorkSystem/add.png"
                    class="imag-icon"
                    (click)="addFiledForCurrentStat()"
                  />
                </div>
                <div class="">
                  <img
                    src="../../../../../assets/images/WorkSystem/minus.png"
                    class="imag-icon"
                    (click)="removeFieldForCurrentStat()"
                  />
                </div>
              </div>
            </div>
          </div>

          <div
            cdkDropList
            class="example-list"
            (cdkDropListDropped)="dropCurrentStateFileds($event)"
          >
            <div
              class="input-group mb-1 pl-1"
              *ngFor="let o of listOfCurrentState; let i = index"
              (click)="fetchIndexforStateFields(i)"
              cdkDrag
            >
              <span
                class="input-group-text mr-1"
                id="basic-addon1"
                [ngStyle]="{ 'background-color': o?.color }"
                (click)="addRatingForCurrentState(i)"
                >{{ i + 1 < 10 ? i + 1 + ".0" : i + 1 }}</span
              >
              <span
                *ngIf="
                  o.showModal &&
                  currentStateShowModal == true &&
                  pdcaShowModal == false &&
                  GraphList[GraphListIndex].showModal == true
                "
                class="tollbar-group"
              >
                <app-mian-tool-bar
                  (pushColorToMainParentSpan)="
                    setColorValueForCurrentStat($event)
                  "
                  (pushNotesValue)="getNoteForCurrentState($event)"
                  (pushOppertunity)="getOpportunityForCurrentState($event)"
                  (pushTaslValue)="getTaskForCurrentState($event)"
                  (pushDecisionValue)="getDecisionForCurrentState($event)"
                  [showSnakeBarMenu]="showSnakeBar"
                  [displayVal]="showModal"
                  [openRatingTabFlag]="true"
                  [openRatingForNote]="true"
                  [color]="currentStatesPhases[i]?.rating?.color"
                  [note]="currentStatesPhases[i]?.rating?.note"
                  [decision]="currentStatesPhases[i]?.rating?.decision"
                  [opportunity]="currentStatesPhases[i]?.rating?.opportunity"
                  [task]="currentStatesPhases[i]?.rating?.task"
                >
                </app-mian-tool-bar>
              </span>
              <input
                type="text"
                class="icon input-height2"
                placeholder=""
                aria-label="Username"
                maxlength="250"
                aria-describedby="basic-addon1"
                (input)="setCurrentStateValue(o, i)"
                [(ngModel)]="o.value"
                [disabled]="true ? lockstatus == true : false"
              />
              <!-- <span>{{o.value}}</span> -->
            </div>
          </div>
        </div>
      </div>
      <div class="custom-card">
        <div class="card inner-card-fileds mr-2 mt-2">
          <div class="row">
            <div class="col-6 til head">
              <label class="label">{{ title }} </label>
            </div>
            <div class="col-6 buttons head">
              <div class="d-flex justify-content-end">
                <div
                  class=""
                  (click)="startService('pdca')"
                  *ngIf="showMicForPDCA"
                >
                  <i
                    class="fa fa-microphone microphone-ico"
                    [ngStyle]="{ color: voicePDCA == true ? 'red' : 'blue' }"
                  ></i>
                </div>
                <div class="">
                  <img
                    src="../../../../../assets/images/WorkSystem/add.png"
                    class="imag-icon"
                    (click)="addFiledForPDCA()"
                  />
                </div>
                <div class="">
                  <img
                    src="../../../../../assets/images/WorkSystem/minus.png"
                    class="imag-icon"
                    (click)="removeFieldForPDCA()"
                  />
                </div>
              </div>
            </div>
          </div>

          <div
            cdkDropList
            class="example-list"
            (cdkDropListDropped)="dropMangment($event)"
          >
            <div
              class="input-group mb-1 pl-1"
              *ngFor="let o of listOfPDCA; let i = index"
              (click)="fetchIndexForPDCA(i)"
              cdkDrag
            >
              <span
                class="input-group-text mr-1"
                id="basic-addon1"
                [ngStyle]="{ 'background-color': o?.color }"
                (click)="addRatingForPDCA(i)"
                >{{ i + 1 < 10 ? i + 1 + ".0" : i + 1 }}</span
              >
              <span
                *ngIf="
                  o.showModal &&
                  pdcaShowModal == true &&
                  currentStateShowModal == false &&
                  GraphList[GraphListIndex].showModal == true
                "
                class="tollbar-group"
              >
                <app-mian-tool-bar
                  (pushColorToMainParentSpan)="setColorValueForPDCA($event)"
                  (pushTaslValue)="getTaskForPDCA($event)"
                  (pushDecisionValue)="getDecisionForPDCA($event)"
                  (pushOppertunity)="getOpportunityForPDCA($event)"
                  (pushNotesValue)="getNoteForPDCA($event)"
                  [showSnakeBarMenu]="showSnakeBar"
                  [displayVal]="showModal"
                  [openRatingTabFlag]="true"
                  [openRatingForNote]="true"
                  [color]="pdcaPhases[i]?.rating?.color"
                  [decision]="pdcaPhases[i]?.rating?.decision"
                  [opportunity]="pdcaPhases[i]?.rating?.opportunity"
                  [task]="pdcaPhases[i]?.rating?.task"
                  [note]="pdcaPhases[i]?.rating?.note"
                >
                </app-mian-tool-bar>
              </span>
              <input
                type="text"
                class="input-height2 icon"
                placeholder=""
                aria-label="Username"
                maxlength="250"
                aria-describedby="basic-addon1"
                (input)="setPDCAValue(o, i)"
                [(ngModel)]="o.value"
                [disabled]="true ? lockstatus == true : false"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<span *ngIf="showChartModal" class="position-card">
  <app-graph-value-modal
    (onCancel)="fetchFlag($event)"
    [binding]="measurementName"
    (sendGraphInputs)="getGraphData($event)"
    (chartData)="getChartData($event)"
    [graphData]="this.graphData"
  >
  </app-graph-value-modal>
</span>
<div class="div" *ngIf="showLightModal">
  <app-add-rating
    [isdisplayRatingModal]="showLightModal"
    (onaddRating)="selectedColor($event)"
    (onCancel)="cancelMode($event)"
    [color]="graphColor"
  ></app-add-rating>
</div>
